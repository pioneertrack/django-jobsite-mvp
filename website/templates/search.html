{% extends 'base.html' %}
{% load i18n %}

{% block title %}
{% trans "Home" %}
{% endblock %}
{% if is_mobile %}

  {% block mobile_content %}
    <div class='container' style="padding-top: 30px; padding-bottom:30px;">
      <div class='row'>
        {% for item, skills in searched %}
          {% if item.level %}
            {% with current_user=item.founder.user %}
              <div class="col col-md-4 item">

                <a class="card-hover" href='/startups/{{ current_user.id }}'>
                  <div class="card job-card">
                    <div class="header-bg" style="height:100px; background-color:#25283D;">
                      <h2>{{ current_user.founder.startup_name }}</h2>
                      <div class="avatar"
                        style="background-image: url('{{ current_user.founder.logo_thumbnail.url }}');">
                      </div>
                    </div>
                    <div class="offer-content">
                      <div class="info">
                        <h3>{{ item.title }}</h3>
                        <div class="pcomp">
                          <div class="mdata">
                            <span
                                class="font-weight-bold">Job position:&nbsp;</span><span>{{ item.get_level_display }}</span>
                          </div>
                          <div class="mdata">
                            <span
                                class="font-weight-bold">Compensation type:&nbsp;</span><span>{{ item.get_pay_display }}</span>
                          </div>
                        </div>
                      </div>
                      <script type="text/javascript">
                        $(function() {
                          $('.description p').each(function(i) {
                            var text = $(this).text().trim();
                            len = text.length;
                            if (len > 200) {
                              $(this).text(text.substr(0, 200) + '...');
                            }
                          });
                        });
                      </script>
                      <div class="description">
                        <p>{{ item.description }}</p>
                      </div>
                    </div>
                  </div>
                </a>

              </div>
            {% endwith %}
          {% else %}
            {% with current_user=item %}
              {% if search_category in people %}
                <div class="col col-md-4" style="height:400px;">

                  <a class="card-hover" href='/profiles/{{ current_user.id }}'>
                    <div class="card">
                      <div class="header-bg" style="height:100px; background-color:#25283D;"></div>
                      <div>
                        <div class="avatar"
                          style="background-image: url('{{ current_user.profile.image_thumbnail.url }}');">
                        </div>
                      </div>
                      <div class="content">
                        <h2>{{ current_user.first_name }} {{ current_user.last_name }}</h2>
                        <h3 style="margin-top:0">{{ current_user.profile.get_year_display }}</h3>
                        {% if current_user.profile.has_startup_exp %}
                          <span class="label label-default">Has startup experience</span>
                        {% endif %}
                        {% if current_user.profile.has_funding_exp %}
                          <span class="label label-default">Has funding experience</span>
                        {% endif %}
                        <span class="label label-primary">{{ current_user.profile.get_year_display }}</span>
                        <span class="label label-primary">{{ current_user.profile.get_major_display }}</span>
                        <span class="label label-info">{{ current_user.profile.get_role_display }}</span>
                        {% for skill in skills|slice:":5" %}
                          <span class="label label-info">{{ skill }}</span>
                        {% endfor %}
                        <span class="label label-success">{{ current_user.profile.get_hours_week_display }} hr/wk</span>
                        {% for work in current_user.profile.experience_set.all %}
                          <span class="label label-danger">Worked at {{ work.company }}</span>
                        {% endfor %}
                        {% for item in current_user.positions_display %}
                          <span class="label label-warning">{{ item }}</span>
                        {% endfor %}
                        <!--<div style = "padding:10px;">
                        <a href="/users/{{user.id}}" class="btn btn-primary btn-outline">View profile</a>
                        </div>-->
                      </div>
                    </div>
                  </a>

                </div>
              {% else %}
                <div class="col col-md-4" style="height:400px;">

                  <a class="card-hover" href='/startups/{{ current_user.id }}'>
                    <div class="card">
                      <div class="header-bg" style="height:100px; background-color:#25283D;"></div>
                      <div>
                        <div class="avatar"
                          style="background-image: url('{{ current_user.founder.logo_thumbnail.url }}');">
                        </div>
                      </div>
                      <div class="content">
                        <h2>{{ current_user.founder.startup_name }}</h2>
                        <h4>{{ current_user.founder.get_stage_display }} • {{ current_user.founder.employee_count }}
                          Employee{{ current_user.founder.employee_count|pluralize }}</h4>
                        <hr>
                        <script type="text/javascript">
                          $(function() {
                            $('.founderdescription').each(function(i) {
                              len = $(this).text().length;
                              if (len > 300) {
                                $(this).text($(this).text().substr(0, 200) + '...');
                              }
                            });
                          });
                        </script>
                        <div class="founderdescription">
                          <p>{{ current_user.founder.description }}<p>
                        </div>
                        <!--<div style = "padding:10px;">
                        <a href="/users/{{user.id}}" class="btn btn-primary btn-outline">View profile</a>
                        </div>-->
                      </div>
                    </div>
                  </a>

                </div>
              {% endif %}
            {% endwith %}
          {% endif %}
        {% empty %}
          <div class="col col-md-12 text-center">
            <h1><i class="fa fa-exclamation-circle" aria-hidden="true"></i> There were no users that matched your search
              query! Try another search.</h1>
          </div>
        {% endfor %}
      </div>
    </div>
  {% endblock %}

{% else %}

  {% block content %}
    <div class='container' style="padding-top: 30px; padding-bottom:30px;">
      <div class='row'>
        {% for item, skills in searched %}
          {% if item.level %}
            {% with current_user=item.founder.user %}
              <div class="col col-md-4 item">

                <a class="card-hover" href='/startups/{{ current_user.id }}'>
                  <div class="card job-card">
                    <div class="header-bg" style="height:100px; background-color:#25283D;">
                      <h2>{{ current_user.founder.startup_name }}</h2>
                      <div class="avatar"
                        style="background-image: url('{{ current_user.founder.logo_thumbnail.url }}');">
                      </div>
                    </div>
                    <div class="offer-content">
                      <div class="info">
                        <h3>{{ item.title }}</h3>
                        <div class="pcomp">
                          <div class="mdata">
                            <span
                                class="font-weight-bold">Job position:&nbsp;</span><span>{{ item.get_level_display }}</span>
                          </div>
                          <div class="mdata">
                            <span
                                class="font-weight-bold">Compensation type:&nbsp;</span><span>{{ item.get_pay_display }}</span>
                          </div>
                        </div>
                      </div>
                      <script type="text/javascript">
                        $(function() {
                          $('.description p').each(function(i) {
                            var text = $(this).text().trim();
                            len = text.length;
                            if (len > 200) {
                              $(this).text(text.substr(0, 200) + '...');
                            }
                          });
                        });
                      </script>
                      <div class="description">
                        <p>{{ item.description }}</p>
                      </div>
                    </div>
                  </div>
                </a>

              </div>
            {% endwith %}
          {% else %}
            {% with current_user=item %}
              {% if search_category in people %}
                <div class="col col-md-4" style="height:400px;">

                  <a class="card-hover" href='/profiles/{{ current_user.id }}'>
                    <div class="card">
                      <div class="header-bg" style="height:100px; background-color:#25283D;"></div>
                      <div>
                        <div class="avatar"
                          style="background-image: url('{{ current_user.profile.image_thumbnail.url }}');">
                        </div>
                      </div>
                      <div class="content">
                          <h2>{{ current_user.first_name }} {{ current_user.last_name }}</h2>
                          <h3 style="margin-top:0">{{ current_user.profile.get_year_display }}</h3>
                          {% if current_user.profile.has_startup_exp %}
                            <span class="label label-default">Has startup experience</span>
                          {% endif %}
                          {% if current_user.profile.has_funding_exp %}
                            <span class="label label-default">Has funding experience</span>
                          {% endif %}
                          <span class="label label-primary">{{ current_user.profile.get_year_display }}</span>
                          <span class="label label-primary">{{ current_user.profile.get_major_display }}</span>
                          <span class="label label-info">{{ current_user.profile.get_role_display }}</span>
                          {% for skill in skills|slice:":5" %}
                            <span class="label label-info">{{ skill }}</span>
                          {% endfor %}
                          <span class="label label-success">{{ current_user.profile.get_hours_week_display }} hr/wk</span>
                          {% for work in current_user.profile.experience_set.all %}
                            <span class="label label-danger">Worked at {{ work.company }}</span>
                          {% endfor %}
                          {% for item in current_user.positions_display %}
                            <span class="label label-warning">{{ item }}</span>
                          {% endfor %}
                        <!--<div style = "padding:10px;">
                          <a href="/users/{{user.id}}" class="btn btn-primary btn-outline">View profile</a>
                          </div>-->
                      </div>
                    </div>
                  </a>

                </div>
              {% else %}
                <div class="col col-md-4" style="height:400px;">

                  <a class="card-hover" href='/startups/{{ current_user.id }}'>
                    <div class="card">
                      <div class="header-bg" style="height:100px; background-color:#25283D;"></div>
                      <div>
                        <div class="avatar"
                          style="background-image: url('{{ current_user.founder.logo_thumbnail.url }}');">
                        </div>
                      </div>
                      <div class="content">
                        <h2>{{ current_user.founder.startup_name }}</h2>
                        <h4>{{ current_user.founder.get_stage_display }} • {{ current_user.founder.employee_count }}
                          Employee{{ current_user.founder.employee_count|pluralize }}</h4>
                        <hr>
                        <script type="text/javascript">
                          $(function() {
                            $('.founderdescription').each(function(i) {
                              len = $(this).text().length;
                              if (len > 300) {
                                $(this).text($(this).text().substr(0, 200) + '...');
                              }
                            });
                          });
                        </script>
                        <div class="founderdescription">
                          <p>{{ current_user.founder.description }}<p>
                        </div>
                        <!--<div style = "padding:10px;">
                        <a href="/users/{{user.id}}" class="btn btn-primary btn-outline">View profile</a>
                        </div>-->
                      </div>
                    </div>
                  </a>

                </div>
              {% endif %}
            {% endwith %}
          {% endif %}
        {% empty %}
          <div class="col col-md-12 text-center">
            <h1><i class="fa fa-exclamation-circle" aria-hidden="true"></i> There were no users that matched your search
              query! Try another search.</h1>
          </div>
        {% endfor %}
      </div>
    </div>
  {% endblock %}

{% endif %}