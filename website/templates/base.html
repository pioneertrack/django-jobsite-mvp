{% load static from staticfiles %}
{% load website_tags %}
{#{% load pipeline %}#}
<!doctype html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="google-site-verification" content="nPkjkzj2J7V1MRk-0QBYC7GQnfKtWPBdCvvL0Y_qGbM"/>
  <link rel='shortcut icon' type='image/x-icon' href='{% static 'favicon/favicon-connectdevelop.ico' %}?r=1'/>
  <link rel="stylesheet" href="{% static 'bootstrap/dist/css/bootstrap.min.css' %}" type="text/css">
  <link rel="stylesheet" href="{% static 'nice-select/css/nice-select.css' %}" type="text/css">

  <link rel="stylesheet" href="{% static 'css/login.css' %}" type="text/css">
  <link rel="stylesheet" href="{% static 'css/profile.css' %}" type="text/css">
  <link rel="stylesheet" href="{% static 'css/searchbar.css' %}" type="text/css">
  <link rel="stylesheet" href="{% static 'css/dropdown.css' %}" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Anton" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300" rel="stylesheet">
  {#        {% javascript 'components' %}#}
  <script src="{% static 'jquery/dist/jquery.min.js' %}"></script>
  <script src="{% static 'bootstrap/dist/js/bootstrap.min.js' %}"></script>
  <script src="{% static 'nice-select/js/jquery.nice-select.js' %}"></script>
  <script src="{% static 'js/navbar.js' %}"></script>
  <script src="{% static 'js/jquery_formset.js' %}"></script>
  <script src="{% static 'js/script.js' %}"></script>
  <script src="{% static 'js/Modernizer.js' %}"></script>
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/sweetalert2/6.4.4/sweetalert2.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/sweetalert2/6.4.4/sweetalert2.min.css">
  <title>{% block title %}{% endblock %}</title>
  <script>
    {% if show_exp %}
      $(function() {
        $('#profileform .set .forminstance').formset({
          prefix: 'experience_set',
          deleteCssClass: 'remove',
          deleteText: '[&mdash;] remove',
          addCssClass: 'add-another',
          addText: '[+] Add work experience',
        });
      });
    {% else %}
      $(function() {
        $('#profileform .set #funding').formset({
          prefx: 'founder_set1',
          deleteCssClass: 'remove',
          deleteText: '[&mdash;] remove',
          addCssClass: 'add-another',
          addText: '[+] Add funding round',
          formCssClass: 'dynamic-form1',
        });
        $('#profileform .set #jobs').formset({
          prefix: 'founder_set2',
          deleteCssClass: 'remove',
          deleteText: '[&mdash;] remove',
          addCssClass: 'add-another',
          addText: '[+] Add job opening',
          formCssClass: 'dynamic-form2',
        });
      });
    {%endif%}
    $(document).ready(function() {
      setTimeout(function() {
        $('.message').fadeOut('slow');
      }, 2000);
    });
  </script>
</head>
<body>
<header class="cd-auto-hide-header">
  <div class="logo"><a href="/"><img src="{% static 'favicon/logo.jpg' %}"/></a></div>
  <nav class="cd-primary-nav">
    {% if request.user.is_authenticated %}
      <a href="#cd-navigation" class="nav-trigger">
      			<span>
      				<em aria-hidden="true"></em>
      				Menu
      			</span>
      </a><!-- .nav-trigger -->
      <ul id="cd-navigation">
        <li><a href="/profile/"><img id="headerthumbnail" src="
            {% if not request.user.is_founder %}{{ request.user.profile.image.url }}{% else %}{{ request.user.founder.logo.url }}{% endif %}">
          My Profile</a></li>
        <li><a href="/logout/">Logout</a></li>
      </ul>
    {% elif not request.user.is_authenticated %}
      <div class="unauth-nav">
        {% if request.path != '/register/' %}
          <button type="button" class="btn btn-register">Register</button>
        {% else %}
          <button type="button" class="btn btn-login">Login</button>
        {% endif %}
      </div>
    {% endif %}
  </nav> <!-- .cd-primary-nav -->

  {% if request.user.is_authenticated %}
    <nav class="cd-secondary-nav">

      <form id="mainform" action="/" autocomplete="off" method="POST">
        {% csrf_token %}

        <input type="hidden" value="{% if partners_hidden %}{{ partners_hidden }}{% endif %}" name="filter_partners"
               id="filter_partners">
        <input type="hidden" value="{% if employees_hidden %}{{ employees_hidden }}{% endif %}" name="filter_employees"
               id="filter_employees">
        <input type="hidden" value="{% if freelancers_hidden %}{{ freelancers_hidden }}{% endif %}" name="filter_freelancers"
               id="filter_freelancers">
        <input type="hidden" value="{% if jobs_hidden %}{{ jobs_hidden }}{% endif %}" name="filter_jobs"
               id="filter_jobs">
        <input type="hidden" value="{% if startups_hidden %}{{ startups_hidden }}{% endif %}" name="filter_startups"
               id="filter_startups">

        <div id="search" class="cd-main-search is-visible">

          <div class="searchform">

            <div class="cd-switch-view">
              <input type="checkbox" name="view_type" id="view_type">
              <label for="view_type">
                <i class="fa fa-list" aria-hidden="true"></i>
                <i class="fa fa-th-large" aria-hidden="true"></i>
              </label>
            </div>

            <nav class="cd-secondary-nav cd-search-nav first">

              <div class="selects partners">
                {% for item in p_context %}
                  <div class="filter-container">
                    <select class="filter small"
                            form="mainform"
                            name="{{ item.0 }}_partners"
                            multiple style="display: none;"
                            data-class="{% if item.2.class %}{{ item.2.class }}{% else %}label-info{% endif %}">
                      <option class="text-capitalize" selected
                              data-display="{% if item.2.name %}{{ item.2.name }}{% else %}{{ item.0 }}{% endif %}"
                          {% if item.0|add:"_partners" in active_selects %}
                              data-revert="Select All"
                              data-text="Diselect All"
                          {% else %}
                              data-revert="Diselect All"
                              data-text="Select All"
                          {% endif %}
                      >
                      </option>
                      {% for subitem in item.1 %}
                        {% to_list item.0|add:"_partners" subitem.0 subitem.1 item.2.class as tmp_list %}
                        <option value="{{ subitem.0 }}"
                                class="text-capitalize"
                                {% if tmp_list in filter_partners %}selected{% endif %}
                        >{{ subitem.1 }}</option>
                      {% endfor %}
                    </select>
                  </div>
                {% endfor %}
              </div>

              <div class="selects employees">
                {% for item in p_context %}
                  <div class="filter-container">
                    <select class="filter small"
                            form="mainform"
                            name="{{ item.0 }}_employees"
                            multiple style="display: none;"
                            data-class="{% if item.2.class %}{{ item.2.class }}{% else %}label-info{% endif %}">
                      <option class="text-capitalize" selected
                              data-display="{% if item.2.name %}{{ item.2.name }}{% else %}{{ item.0 }}{% endif %}"
                          {% if item.0|add:"_employees" in active_selects %}
                              data-revert="Select All"
                              data-text="Diselect All"
                          {% else %}
                              data-revert="Diselect All"
                              data-text="Select All"
                          {% endif %}
                      >
                      </option>
                      {% for subitem in item.1 %}
                        {% to_list item.0|add:"_employees" subitem.0 subitem.1 item.2.class as tmp_list %}
                        <option value="{{ subitem.0 }}"
                                class="text-capitalize"
                                {% if tmp_list in filter_employees %}selected{% endif %}
                        >{{ subitem.1 }}</option>
                      {% endfor %}
                    </select>
                  </div>
                {% endfor %}
              </div>


              <div class="selects freelancers">
                {% for item in p_context %}
                  <div class="filter-container">
                    <select class="filter small"
                            form="mainform"
                            name="{{ item.0 }}_freelancers"
                            multiple style="display: none;"
                            data-class="{% if item.2.class %}{{ item.2.class }}{% else %}label-info{% endif %}">
                      <option class="text-capitalize" selected
                              data-display="{% if item.2.name %}{{ item.2.name }}{% else %}{{ item.0 }}{% endif %}"
                          {% if item.0|add:"_freelancers" in active_selects %}
                              data-revert="Select All"
                              data-text="Diselect All"
                          {% else %}
                              data-revert="Diselect All"
                              data-text="Select All"
                          {% endif %}
                      >
                      </option>
                      {% for subitem in item.1 %}
                        {% to_list item.0|add:"_freelancers" subitem.0 subitem.1 item.2.class as tmp_list %}
                        <option value="{{ subitem.0 }}"
                                class="text-capitalize"
                                {% if tmp_list in filter_freelancers %}selected{% endif %}
                        >{{ subitem.1 }}</option>
                      {% endfor %}
                    </select>
                  </div>
                {% endfor %}
              </div>

              <div class="selects jobs">
                {% for item in job_context %}
                  <div class="filter-container">
                    <select class="filter small"
                            form="mainform"
                            name="{{ item.0 }}"
                            multiple style="display: none;"
                            data-class="{% if item.2.class %}{{ item.2.class }}{% else %}label-info{% endif %}">
                      <option class="text-capitalize" selected
                              data-display="{% if item.2.name %}{{ item.2.name }}{% else %}{{ item.0 }}{% endif %}"
                          {% if item.0 in active_selects %}
                              data-revert="Select All"
                              data-text="Diselect All"
                          {% else %}
                              data-revert="Diselect All"
                              data-text="Select All"
                          {% endif %}
                      >
                      </option>
                      {% for subitem in item.1 %}
                        {% to_list item.0 subitem.0 subitem.1 item.2.class as tmp_list %}
                        <option value="{{ subitem.0 }}"
                                class="text-capitalize"
                                {% if tmp_list in filter_jobs %}selected{% endif %}
                        >{{ subitem.1 }}</option>
                      {% endfor %}
                    </select>
                  </div>
                {% endfor %}
              </div>

              <div class="selects startups">
                {% for item in f_context %}
                  <div class="filter-container">
                    <select class="filter small"
                            form="mainform"
                            name="{{ item.0 }}"
                            multiple style="display: none;"
                            data-class="{% if item.2.class %}{{ item.2.class }}{% else %}label-info{% endif %}">
                      <option class="text-capitalize" selected
                              data-display="{% if item.2.name %}{{ item.2.name }}{% else %}{{ item.0 }}{% endif %}"
                          {% if item.0 in active_selects %}
                              data-revert="Select All"
                              data-text="Diselect All"
                          {% else %}
                              data-revert="Diselect All"
                              data-text="Select All"
                          {% endif %}
                      >
                      </option>
                      {% for subitem in item.1 %}
                        {% to_list item.0 subitem.0 subitem.1 item.2.class as tmp_list %}
                        <option value="{{ subitem.0 }}"
                                class="text-capitalize"
                                {% if tmp_list in filter_startups %}selected{% endif %}
                        >{{ subitem.1 }}</option>
                      {% endfor %}
                    </select>
                  </div>
                {% endfor %}
              </div>

            </nav> <!-- .cd-secondary-nav -->

            <input type="search" name="query" placeholder="Search... ">
            <div class="cd-select filter-container">
                  <div>Find</div>
                  <select id="selector" name="select-category" class="filter small no-overflow">
                      <optgroup label="People">
                        <option value="partners"
                                {% if not founder and not search_category %}selected{% elif search_category == 'partners' %}
                                selected{% endif %}>
                          Partners
                        </option>
                        <option value="employees" {% if search_category == 'employees' %}selected{% endif %}>
                          Employees
                        </option>
                        <option value="freelancers" {% if search_category == 'freelancers' %}selected{% endif %}>
                          Freelancers
                        </option>
                      </optgroup>
                      <option value="startups"
                              {% if founder and not search_category %}selected{% elif search_category == 'startups' %}
                              selected{% endif %}>Startups
                      </option>
                      <option value="jobs" {% if search_category == 'jobs' %}selected{% endif %}>
                          Jobs
                      </option>
                  </select>

              </div>

            <div class="cd-search-button">
              <button id="searchbutton" type="submit" class="btn btn-success">
                <i class="fa fa-search"></i>
              </button>
            </div>

          </div>
        </div>

      </form>

    </nav> <!-- .cd-secondary-nav -->
  {% endif %}

  {% if request.user.is_authenticated %}
    <nav class="cd-secondary-nav cd-search-nav tags">
      <div class="container">

        <div class="tags startups {% if filter_startups %}selected{% endif %}">
          <div id="tags_startups" class="filter-container">
            {% if search_category == 'startups' %}
              {% if filter_startups %}
                <span class="tag label label-clear">Clear All</span>
              {% endif %}
              {% for item in filter_startups %}
                <span class="tag label {{ item.3 }}" data-value="{{ item.1 }}"
                      data-name="{{ item.0 }}">{{ item.2 }}<span
                    data-role="remove"></span></span>
              {% endfor %}
            {% endif %}
          </div>
        </div>

        <div class="tags partners {% if filter_partners %}selected{% endif %}">
          <div id="tags_partners" class="filter-container">
            {% if search_category == 'partners' %}
              {% if filter_partners %}
                <span class="tag label label-clear">Clear All</span>
              {% endif %}
              {% for item in filter_partners %}
                <span class="tag label {{ item.3 }}" data-value="{{ item.1 }}"
                      data-name="{{ item.0 }}">{{ item.2 }}<span
                    data-role="remove"></span></span>
              {% endfor %}
            {% endif %}
          </div>
        </div>

        <div class="tags employees {% if filter_employees %}selected{% endif %}">
          <div id="tags_employees" class="filter-container">
            {% if search_category == 'employees' %}
              {% if filter_employees %}
                <span class="tag label label-clear">Clear All</span>
              {% endif %}
              {% for item in filter_employees %}
                <span class="tag label {{ item.3 }}" data-value="{{ item.1 }}"
                      data-name="{{ item.0 }}">{{ item.2 }}<span
                    data-role="remove"></span></span>
              {% endfor %}
            {% endif %}
          </div>
        </div>

        <div class="tags freelancers {% if filter_freelancers %}selected{% endif %}">
          <div id="tags_freelancers" class="filter-container">
            {% if search_category == 'freelancers' %}
              {% if filter_freelancers %}
                <span class="tag label label-clear">Clear All</span>
              {% endif %}
              {% for item in filter_freelancers %}
                <span class="tag label {{ item.3 }}" data-value="{{ item.1 }}"
                      data-name="{{ item.0 }}">{{ item.2 }}<span
                    data-role="remove"></span></span>
              {% endfor %}
            {% endif %}
          </div>
        </div>

        <div class="tags jobs {% if filter_jobs %}selected{% endif %}">
          <div id="tags_jobs" class="filter-container">
            {% if search_category == 'jobs' %}
              {% if filter_jobs %}
                <span class="tag label label-clear">Clear All</span>
              {% endif %}
              {% for item in filter_jobs %}
                <span class="tag label {{ item.3 }}" data-value="{{ item.1 }}"
                      data-name="{{ item.0 }}">{{ item.2 }}<span
                    data-role="remove"></span></span>
              {% endfor %}
            {% endif %}
          </div>
        </div>

      </div>
    </nav> <!-- .cd-secondary-nav -->
  {% endif %}

</header> <!-- .cd-auto-hide-header -->

<main class="cd-main-content"
      style="background-color:{% if not request.user.is_authenticated %} #25283D {% else %} white {% endif %}">
  {% if messages and request.user.is_authenticated %}
    <ul class="messages {% if  filter_startups or filter_people or filter_jobs %}tags{% endif %}">
    </ul>
    <div style="position:fixed;width:30%;z-index:1000;bottom:1.5%;right:1%;">
      {% for message in messages %}
        <div class="message alert {% if message.tags %} alert-{{ message.tags }} {% endif %} fade in"
             style="position:relative; z-index:1000; width:100%;">
          <a href="#" class="close" data-dismiss="alert">&times;</a>
          {% if message.tags %}<strong>{{ message.tags|capfirst }}!</strong>{% endif %} {{ message }}.
        </div>
      {% endfor %}
    </div>
  {% elif request.user.is_authenticated %}
    <div class="messages"></div>
  {% endif %}
  {% block content %}{% endblock %}
</main> <!-- .cd-main-content -->

<a href="#0" class="cd-top"></a>
</body>

{% if request.user.first_name %}
  <script type="text/javascript">
    name = {%if not user.is_founder%}'{{user.first_name|safe}}'{%else%}'{{user.founder.startup_name|safe}}';{%endif%}
    user = '{{user.id|safe}}';
  </script>
{% endif %}

{% if GOOGLE_ANALYTICS_PROPERTY_ID %}
  <script>
    (function(i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function() {
        (i[r].q = i[r].q || []).push(arguments);
      }, i[r].l = 1 * new Date();
      a = s.createElement(o),
          m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m);
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', '{{ GOOGLE_ANALYTICS_PROPERTY_ID }}', '{{ GOOGLE_ANALYTICS_DOMAIN }}');
    ga('send', 'pageview');

  </script>
{% endif %}

</html>
